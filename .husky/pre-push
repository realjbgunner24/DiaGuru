#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Block any push where the remote ref is refs/heads/main
blocked=0
while read -r local_ref local_sha remote_ref remote_sha
do
  case "$remote_ref" in
    refs/heads/main)
      blocked=1
      ;;
  esac
done

if [ "$blocked" -eq 1 ]; then
  echo "Direct pushes to main are disabled. Open a PR."
  exit 1
fi